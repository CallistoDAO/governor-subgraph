"""
This entity represents a gOHM token holder that has delegated their voting power to an address.
"""
type VoteDelegator @entity {
  """
  Record ID.

  Format: token holder address
  """
  id: Bytes!
  """
  Address of the owner/delegator.
  """
  address: Bytes!
  """
  Delegatee record.

  Null if the votes have not been delegated.
  """
  delegatee: Voter
}

"""
This entity represents a voter that has received delegations and can cast votes.
"""
type Voter @entity(immutable: true) {
  """
  Record ID.

  Format: voter address
  """
  id: Bytes!
  """
  Voter address.
  """
  address: Bytes!

  # Related entities
  proposalsCreated: [ProposalCreated!] @derivedFrom(field: "proposer")
  votesCasted: [VoteCast!] @derivedFrom(field: "voter")
  votingPowerSnapshots: [VoterVotingPowerSnapshot!] @derivedFrom(field: "voter")
  """
  Addresses that have delegated their voting power to this voter.
  """
  delegators: [VoteDelegator!] @derivedFrom(field: "delegatee")
}

"""
This entity represents a snapshot of a voter's voting power.
"""
type VoterVotingPowerSnapshot @entity(immutable: true) {
  """
  Record ID.

  Format: `{voter}{blockNumber}{logIndex}`
  """
  id: Bytes!
  """
  Voter address.
  """
  voter: Voter!
  """
  Voting power, the sum of all delegations.
  """
  votingPower: BigDecimal!

  """
  Block number of the snapshot.
  """
  blockNumber: BigInt!
  """
  Timestamp of the snapshot.
  """
  blockTimestamp: BigInt!

  # Related records
  event: DelegateVotesChanged @derivedFrom(field: "snapshot")
}

type NewAdmin @entity(immutable: true) {
  id: Bytes!
  oldAdmin: Bytes! # address
  newAdmin: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type NewImplementation @entity(immutable: true) {
  id: Bytes!
  oldImplementation: Bytes! # address
  newImplementation: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type NewPendingAdmin @entity(immutable: true) {
  id: Bytes!
  oldPendingAdmin: Bytes! # address
  newPendingAdmin: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ProposalCanceled @entity(immutable: true) {
  """
  Record ID.

  A proposal can only be cancelled once, so the record ID can be the proposal ID and not have any clashes.

  Format: `{proposalId}`
  """
  id: String!
  proposalId: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  proposal: ProposalCreated!
}

type ProposalCreated @entity(immutable: true) {
  """
  Record ID.

  Format: `{proposalId}`
  """
  id: String!
  proposalId: BigInt! # uint256
  proposer: Voter!
  targets: [Bytes!]! # address[]
  values: [BigInt!]! # uint256[]
  signatures: [String!]! # string[]
  calldatas: [Bytes!]! # bytes[]
  startBlock: BigInt! # uint256
  description: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!

  cancelled: ProposalCanceled @derivedFrom(field: "proposal")
  executed: ProposalExecuted @derivedFrom(field: "proposal")
  queued: ProposalQueued @derivedFrom(field: "proposal")
  vetoed: ProposalVetoed @derivedFrom(field: "proposal")
  votingStarted: ProposalVotingStarted @derivedFrom(field: "proposal")
  votes: [VoteCast!] @derivedFrom(field: "proposal")
}

type ProposalExecuted @entity(immutable: true) {
  """
  Record ID.

  A proposal can only be executed once, so the record ID can be the proposal ID and not have any clashes.

  Format: `{proposalId}`
  """
  id: String!
  proposalId: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  proposal: ProposalCreated!
}

type ProposalQueued @entity(immutable: true) {
  """
  Record ID.

  A proposal can only be queued once, so the record ID can be the proposal ID and not have any clashes.

  Format: `{proposalId}`
  """
  id: String!
  proposalId: BigInt! # uint256
  eta: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  proposal: ProposalCreated!
}

type ProposalThresholdSet @entity(immutable: true) {
  id: Bytes!
  oldProposalThreshold: BigInt! # uint256
  newProposalThreshold: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ProposalVetoed @entity(immutable: true) {
  """
  Record ID.

  A proposal can only be vetoed once, so the record ID can be the proposal ID and not have any clashes.

  Format: `{proposalId}`
  """
  id: String!
  proposalId: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  proposal: ProposalCreated!
}

type ProposalVotingStarted @entity(immutable: true) {
  """
  Record ID.

  A proposal can only have voting started once, so the record ID can be the proposal ID and not have any clashes.

  Format: `{proposalId}`
  """
  id: String!
  proposalId: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  proposal: ProposalCreated!
}

type VetoGuardianSet @entity(immutable: true) {
  id: Bytes!
  oldGuardian: Bytes! # address
  newGuardian: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type VoteCast @entity(immutable: true) {
  """
  Record ID.

  Format: `{proposalId}-{voter}-{transactionHash}-{logIndex}`
  """
  id: String!
  voter: Voter!
  proposalId: BigInt! # uint256
  support: Int! # uint8
  votes: BigDecimal!
  reason: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  proposal: ProposalCreated!
}

type VotingDelaySet @entity(immutable: true) {
  id: Bytes!
  oldVotingDelay: BigInt! # uint256
  newVotingDelay: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type VotingPeriodSet @entity(immutable: true) {
  id: Bytes!
  oldVotingPeriod: BigInt! # uint256
  newVotingPeriod: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type WhitelistAccountExpirationSet @entity(immutable: true) {
  id: Bytes!
  account: Bytes! # address
  expiration: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type WhitelistGuardianSet @entity(immutable: true) {
  id: Bytes!
  oldGuardian: Bytes! # address
  newGuardian: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type DelegateChanged @entity(immutable: true) {
  """
  Record ID.

  Format: `{delegator}{blockNumber}{logIndex}`
  """
  id: Bytes!
  """
  Address delegating voting power.
  """
  delegator: VoteDelegator!
  """
  The previous delegatee.
  """
  previousDelegatee: Voter!
  """
  The new delegatee.
  """
  newDelegatee: Voter!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

"""
This entity records the event emitted when the voting power delegated to a delegatee changes.

Due to a limitation in the emitted event, it is not possible to determine the delegator.
"""
type DelegateVotesChanged @entity(immutable: true) {
  """
  Record ID.

  Format: `{delegatee}{blockNumber}{logIndex}`
  """
  id: Bytes!

  """
  Address receiving delegated voting power.
  """
  delegatee: Voter!
  """
  Previous voting power contributed by the delegator.
  """
  previousBalance: BigDecimal!
  """
  New voting power contributed by the delegator.
  """
  newBalance: BigDecimal!
  """
  Voting power snapshot record.
  """
  snapshot: VoterVotingPowerSnapshot!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
